<div class="contents">
  <div class="top">
    <!--<nav-bar-component [headerField2]="date.getFullYear()" [headerField]="months[date.getMonth()]" ></nav-bar-component>-->
    <nav-bar-component [headerField2]="date.getFullYear()" [(headerField)]="date"
                       (pushed)="changeDate(date.getFullYear() +$event, date.getMonth(), date.getDate())"></nav-bar-component>

    <nav-bar-component [headerField2]="months[date.getMonth()]" [(headerField)]="date"
                       (pushed)="changeDate(date.getFullYear(), date.getMonth() + $event, date.getDate())"></nav-bar-component>

    <nav-bar-component [headerField2]="date.getDate()" [(headerField)]="date"
                       (pushed)="changeDate(date.getFullYear(), date.getMonth(), date.getDate() + $event )"></nav-bar-component>


    <table class="time table-striped table-hover">
      <thead>
      <tr>
        <th class="bruker">Bruker</th>
        <th class="hour">23:00</th>
        <th class="hour" *ngFor="let a of tempArr; let index = index">
          <div *ngIf="index < 10">0{{index}}:00</div>
          <div *ngIf="index >= 10">{{index}}:00</div>
          <!--0700-1500  1500-2300 2300-0700-->
        </th>
        <th class="filler"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let shift of daysShifts[date.getDate()]; let rows = index">
        <!--<td>{{shift.etternavn}}</td>-->
        <td>{{usersIndexed[shift.userId].etternavn}}, {{usersIndexed[shift.userId].fornavn}}</td>
        <td *ngFor="let b of tempArr; let index = index">
          <div *ngIf="index <= 8 && shift.toTime == 7"
               class="{{cssClasses[usersIndexed[shift.userId].stillingsBeskrivelse]}}">asd

          </div>
          <div *ngIf="index >= 8 && index <= 15 && shift.toTime == 15"
               class="{{cssClasses[usersIndexed[shift.userId].stillingsBeskrivelse]}}">asd
          </div>
          <div *ngIf="index >= 15 && index <= 23 && shift.toTime == 23"
               class="{{cssClasses[usersIndexed[shift.userId].stillingsBeskrivelse]}}">asd
          </div>

        </td>

        <td><button>Slett vakt</button></td>
      </tr>
      <tr *ngIf="vaktansvarligIds[date.getDate()] != undefined">
        <td>VaktAsvarlig:</td>
        <td *ngIf="usersIndexed[vaktansvarligIds[date.getDate()][7]]">{{usersIndexed[vaktansvarligIds[date.getDate()][7]].etternavn}}, {{usersIndexed[vaktansvarligIds[date.getDate()][7]].fornavn}}</td>
        <td *ngIf="usersIndexed[vaktansvarligIds[date.getDate()][15]]">{{usersIndexed[vaktansvarligIds[date.getDate()][15]].etternavn}}, {{usersIndexed[vaktansvarligIds[date.getDate()][15]].fornavn}}</td>
        <td *ngIf="usersIndexed[vaktansvarligIds[date.getDate()][23]]">{{usersIndexed[vaktansvarligIds[date.getDate()][23]].etternavn}}, {{usersIndexed[vaktansvarligIds[date.getDate()][23]].fornavn}}</td>
      </tr>
      </tbody>

    </table>

    <div [hidden]="shiftPercentageOk[0]">
      <a class="varsel glyphicon glyphicon-warning-sign">
        Det er liten prosentandel av sykepleiere eller helsefagarbeidere på skift 2300-0700
      </a>
    </div>
    <div [hidden]="shiftPercentageOk[1]">
      <a class="varsel glyphicon glyphicon-warning-sign">
        Det er liten prosentandel av sykepleiere eller helsefagarbeidere på skift 0700-1500
      </a>
    </div>
    <div [hidden]="shiftPercentageOk[2]">
      <a class="varsel glyphicon glyphicon-warning-sign">
        Det er liten prosentandel av sykepleiere eller helsefagarbeidere på skift 1500-2300
      </a>
    </div>
  </div>

  <div id="colorcode">
    <div class="yellow-div">
      <p>Helsefagarbeider</p>
    </div>
    <div class="green-div">
      <p>Assistent</p>
    </div>
    <div class="red-div">
      <p>Sykepleier</p>
    </div>
  </div> <!--top-->


  <div *ngIf="userHaveShiftThisDay">
    <h4>Send forespørsel om vaktbytte</h4>
    <button (click)="byttVakt = true">Bytt vakter</button>
    <!--<div *ngif="daysShifts[date.getDate()]"></div>-->
    <form>
      <label>Bruker å bytte med</label>
      <select [(ngModel)]="vaktForBytte1.user" name = "first">
        <option *ngFor="let user1 of allUsers">
        {{user1.etternavn}}, {{user1.fornavn}}</option>
      </select>
      <button (click)="switchShifts()">Bytt</button>

    </form>
  </div>
  <div class="bottom">

    <form class="shift1">
      <label for="avdeling1">Avdeling</label>
      <select value="dsf" class="form-control"
              id="avdeling1" required>
        <option value="1">Solbakken</option>
        <option>2</option>
        <option>3</option>
      </select>
    </form>

    <h2>Tilgjengelige</h2>

    <table class="availability table-striped table-hover">
      <thead>
      <tr>
        <th class="bruker">Ansatt</th>
        <th>Fra</th>
        <th class="last">Til</th>
        <th class="filler"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let available of availables[date.toISOString().substr(0,10)]">
        <td>{{available[0].etternavn}}, {{available[0].fornavn}}</td>
        <td>{{available[1].substr(11, 5)}}</td>
        <td>{{available[2].substr(11, 5)}}</td>

      </tr>
      </tbody>
      <!--<tr *ngFor="let shift of shiftsUsersCanWork" (click)="setForm(shift)">
        <td>{{usersIndexed[shift.brukerId]}}</td>
        <td>{{shift.fromTime}}</td>
        <td>{{shift.toTime}}</td></tr>-->
    </table>
    <div>
      <h1>Registrer Tilgjengelighet</h1>
      <label>Fra</label>
      <select [(ngModel)]="availableHour1">
        <option value="23:00:00">23:00</option>
        <option value="07:00:00">07:00</option>
        <option value="15:00:00">15:00</option>
      </select>
      <label>Til</label>
      <select [(ngModel)]="availableHour2">
        <option value="07:00:00">15:00</option>
        <option value="15:00:00">07:00</option>
        <option value="23:00:00">23:00</option>
      </select>
      <button (click)="registerAvailability()">Registrer</button>

      <div *ngIf="availabilityClicked">
        <h1>clicked</h1>
        <div *ngIf="availabilityOk">
          <h1>true</h1>
        </div>
        <div *ngIf="!availabilityOk">
          <h1>false</h1>
        </div>
      </div>
    </div>

  </div> <!--Bottom-->
  <button class="btn btn-primary btn-large" (click)="check()">check</button>
</div>

